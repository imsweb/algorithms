/*
 * Copyright (C) 2022 Information Management Services, Inc.
 */
package com.imsweb.algorithms.svi;

import com.imsweb.algorithms.internal.CensusData;
import com.imsweb.algorithms.internal.CountryData;
import com.imsweb.algorithms.internal.CountyData;
import com.imsweb.algorithms.internal.StateData;

public final class SocialVulnerabilityIndexUtils {

    public static final String ALG_NAME = "Social Vulnerability Index";

    public static final String ALG_VERSION = "version 1.0 released in August 2022";

    public static SocialVulnerabilityIndexOutputDto computeSocialVulnerabilityIndex(SocialVulnerabilityIndexInputDto input) {
        SocialVulnerabilityIndexOutputDto result = new SocialVulnerabilityIndexOutputDto();

        if (!CountryData.getInstance().isTractDataInitialized(input.getAddressAtDxState()))
            CountryData.getInstance().initializeTractData(input.getAddressAtDxState());

        StateData stateData = CountryData.getInstance().getTractData(input.getAddressAtDxState());
        if (stateData != null) {
            CountyData countyData = stateData.getCountyData(input.getCountyAtDxAnalysis());
            if (countyData != null) {
                CensusData censusData = countyData.getCensusData(input.getCensusTract2010());
                if (censusData != null)
                    result.setSviOverallStateBased(censusData.getSviOverallStateBased());
            }
        }

        return result;
    }
}
